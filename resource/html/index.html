<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="IPL Predictor 2018">
    <meta name="author" content="">
    <title>IPL Predictor 2018</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/font-awesome.min.css" rel="stylesheet">
    <link href="css/animate.min.css" rel="stylesheet"> 
    <link href="css/lightbox.css" rel="stylesheet"> 
	<link href="css/main.css" rel="stylesheet">
	<link href="css/responsive.css" rel="stylesheet">
	<link rel="stylesheet" href="css/jquery-ui.min.css">
    <!--[if lt IE 9]>
	    <script src="js/html5shiv.js"></script>
	    <script src="js/respond.min.js"></script>
    <![endif]-->       
    <link rel="shortcut icon" href="images/ico/favicon.ico">
</head><!--/head-->

<body id="home">
	<div class="home-banner">
		<header id="header">              
	        <div class="navbar navbar-inverse" role="banner">
	            <div class="container">
	                <div class="navbar-header">
	                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	                        <span class="sr-only">Toggle navigation</span>
	                        <span class="icon-bar"></span>
	                        <span class="icon-bar"></span>
	                        <span class="icon-bar"></span>
	                    </button>

	                    <a class="navbar-brand" href="index.html">
	                    	<h1><img src="images/logo.png" alt="logo"></h1>
	                    </a>
	                    
	                </div>
	                <div class="collapse navbar-collapse">
	                    <ul class="nav navbar-nav navbar-right">
	                    	<li><a href="#home">Home</a></li>
	                        <li><a href="#predictor">Predictor</a></li>
	                        <li><a href="#action">Fantacy Leauge</a></li>                                       
	                    </ul>
	                </div>
	            </div>
	        </div>
	    </header>
	    <!--/#header-->

	    <section id="home-slider">
	        <div class="container">
	            <div class="row">
	                <div class="main-slider">
	                    <div class="slide-text">
	                        <h1>Become a Game Predictor</h1>
	                        <p>Choose you favorite team and know how the IPL playoff round will be..</p>
	                        <a href="#" class="btn btn-white">Predict Now</a>
	                    </div>
	                    <img src="images/home/slider/cricketer.png" class="slider-hill" alt="slider image">
	                </div>
	            </div>
	        </div>
	        <div class="preloader"><i class="fa fa-sun-o fa-spin"></i></div>
	    </section>
	    <!--/#home-slider-->
	</div>

    <section id="predictor">
        <div class="container">
            <div class="row">
        		<div class="col-sm-12">
        			<div class="match-predictor">        				
        				<h2 class="leauge_head">Predict Now</h2>
						<div class="row play-info">
							<div class="col-sm-4 text-center wow fadeIn" data-wow-duration="1000ms" data-wow-delay="600ms">
								<div class="single-service">
			                        <div class="wow scaleIn" data-wow-duration="500ms" data-wow-delay="300ms">
			                            <img src="images/s1.png" alt="">
			                        </div>
									<h3>Drag and Drop</h3>
									<p class="draginfo">Drag and drop the top 4 team from leauge stage.</p>
			                    </div>
							</div>
							<div class="col-sm-4 text-center wow fadeIn" data-wow-duration="1000ms" data-wow-delay="600ms">
								<div class="single-service">
			                        <div class="wow scaleIn" data-wow-duration="500ms" data-wow-delay="300ms">
			                            <img src="images/s2.png" alt="">
			                        </div>
									<h3>Choose Final teams</h3>
									<p class="draginfo">Click and choose the favroite team in playoff round.</p>
			                    </div>
							</div>
							<div class="col-sm-4 text-center wow fadeIn" data-wow-duration="1000ms" data-wow-delay="600ms">
								<div class="single-service">
			                        <div class="wow scaleIn" data-wow-duration="500ms" data-wow-delay="300ms">
			                            <img src="images/s3.png" alt="">
			                        </div>
									<h3>Share your Prediction</h3>
									<p class="draginfo">Share you pretiction to social media like Facebook, Twitter.</p>
			                    </div>
							</div>
						</div>
						<div class="leagueStage text-center">
							<h3>League stage</h3>
						</div>
						<div class="row">
							<div class="col-sm-12">
							    <div id="leauge_list" class="row league row-sm connect_lists">
							    </div>
							</div>
							<div class="col-md-6 col-md-offset-3 col-sm-10 col-sm-offset-1">
								<div class="drag-container-xs">
									<div class="row row-sm">
										<div class="col-xs-6 col-sm-3">
											<div class="leauge_position">
												<img src="images/position.png" alt="">
												<span>1</span>											
											</div>
										    <div id="drop_list1" class="position_list connect_lists">

										    </div>										
										</div>
										<div class="col-xs-6 col-sm-3">
											<div class="leauge_position">
												<img src="images/position.png" alt="">
												<span>2</span>											
											</div>
										    <div id="drop_list2" class="position_list connect_lists">								        
										    </div>
									    </div>
										<div class="col-xs-6 col-sm-3">
											<div class="leauge_position">
												<img src="images/position.png" alt="">
												<span>3</span>											
											</div>
										    <div id="drop_list3" class="position_list connect_lists">								        
										    </div>
									    </div>
										<div class="col-xs-6 col-sm-3">
											<div class="leauge_position">
												<img src="images/position.png" alt="">
												<span>4</span>											
											</div>
										    <div id="drop_list4" class="position_list connect_lists">								        
										    </div>									
									    </div>				
									</div>
								</div>
							</div>

						</div>

    					<div class="playoffsRounds text-center">
							<h3>Playoffs</h3>        						
	        				<div class="row">
	        					<div class="col-sm-4">
				        			<h4>Qualifier 1</h4>
				        			<div class="qualifier1 row">
				        				<div class="col-xs-6 qualifier1-a1 team-items">
				        					<div class='team-img'>
				        						<img src='images/icons_bg/tbc.png' alt=''>
				        					</div>
				        				</div>
				        				<div class="col-xs-6 qualifier1-a2 team-items">
				        					<div class='team-img'>
				        						<img src='images/icons_bg/tbc.png' alt=''>
				        					</div>
				        				</div>
				        			</div>
	        					</div>
	        					<div class="col-sm-4">
				        			<h4>Eliminator</h4>
				        			<div class="eliminator row">
				        				<div class="col-xs-6 eliminator-a1 team-items">
				        					<div class='team-img'>
				        						<img src='images/icons_bg/tbc.png' alt=''>
				        					</div>
				        				</div>
				        				<div class="col-xs-6 eliminator-a2 team-items">
				        					<div class='team-img'>
				        						<img src='images/icons_bg/tbc.png' alt=''>
				        					</div>
				        				</div>
				        			</div>
	        					</div>
	        					<div class="col-sm-4">
				        			<h4>Qualifier 2</h4>
		        					<div class="qualifier2 row">
					        			<div class="col-xs-6 qualifier2-a1 team-items">
				        					<div class='team-img'>
				        						<img src='images/icons_bg/tbc.png' alt=''>
				        					</div>
				        				</div>
				        				<div class="col-xs-6 qualifier2-a2 team-items">
				        					<div class='team-img'>
				        						<img src='images/icons_bg/tbc.png' alt=''>
				        					</div>
				        				</div>
				        			</div>
	        					</div>
	        				</div>
    					</div>

    					<div class="playoffsRounds text-center">
							<h3>Final</h3>        						
	        				<div class="row">
	        					<div class="col-sm-4 col-sm-offset-4">
									<div class="row finals">
										<div class="col-xs-6 finals-a1 team-items">
											<div class='team-img'>
				        						<img src='images/icons_bg/tbc.png' alt=''>
				        					</div>											
										</div>
										<div class="col-xs-6 finals-a2 team-items">
											<div class='team-img'>
				        						<img src='images/icons_bg/tbc.png' alt=''>
				        					</div>											
										</div>
									</div>
								</div>
	        				</div>
    					</div>

    					<div class="playoffsRounds text-center">
							<h3>Winner</h3>        						
	        				<div class="row">
	        					<div class="col-sm-4 col-sm-offset-4">
									<div class="winner-items">
										<div class='team-img team-img-default'>
			        						<img src='images/icons_bg/tbc.png' alt=''>
			        					</div>											
									</div>
								</div>
	        				</div>
    					</div>

					</div>
        		</div>
            </div>
        </div>
    </section>
    <!--/#services-->

    <section id="action" class="responsive">
        <div class="vertical-center">
             <div class="container">
                <div class="row">
                    <div class="action take-tour">
                        <div class="col-sm-7 wow fadeInLeft" data-wow-duration="500ms" data-wow-delay="300ms">
                            <h1 class="title">Fantacy Leauge</h1>
                            <p>Donâ€™t just watch IPL.. Play it! </p>   
                        </div>
                        <div class="col-sm-5 text-center wow fadeInRight" data-wow-duration="500ms" data-wow-delay="300ms">
                            <div class="tour-button">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
   </section>
    <!--/#action-->



    <section id="fantacyLeauge">
        <div class="container">
            <div class="row">
                <div class="col-sm-12">
                    <div class="clients text-center wow fadeInUp" data-wow-duration="500ms" data-wow-delay="300ms">
                    	<br>
                        <p><img src="images/home/clients.png" class="img-responsive" alt=""></p>
                        <a href="https://fantasy.iplt20.com/" target="_blank" class="btn btn-block-md btn-submit">Play Fantacy</a>
                    </div>
                </div>
            </div>
        </div>
     </section>
    <!--/#clients-->

    <footer id="footer">
        <div class="container">
            <div class="row">
                <div class="col-sm-12">                	
	                <div class="col-sm-12 text-center bottom-separator">
	                    <img src="images/home/footer.png" class="img-responsive inline" alt="">
	                </div>
                    <div class="copyright-text text-center">
                        <p>&copy; IPL Predictor 2018. All Rights Reserved.</p>
                        <p>Crafted by <a href="javascript::void(0);">DS</a></p>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!--/#footer-->

    <script type="text/javascript" src="js/jquery.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/lightbox.min.js"></script>
    <script type="text/javascript" src="js/wow.min.js"></script>
    <script type="text/javascript" src="js/main.js"></script>  

    <script>
    $(function() {

    	var groupsArray;
        $.get ( "data/data.json", function ( data ) {
            groupsArray = data.Teams.slice ();
            populateParticle ( groupsArray );                
        });

    	$('#leauge_list').sortable({
	        connectWith: '.connect_lists',
	        receive: function(event, ui) {
	            var $this = $(this);
	            if ($this.children('div').length > 1 && $this.attr('id') != "leauge_list") {
	                // console.log('Only one per list!');
	                $(ui.sender).sortable('cancel');
	            }
	        }
	    });


    	var result1 = [];
    	var result2 = [];

	    $('.position_list').sortable({
	        connectWith: '.connect_lists',
	        update: function(e, ui) {
	           	result1[0] =  $("#drop_list1").find(".teamid").attr("id");
	            result1[1] =  $("#drop_list2").find(".teamid").attr("id");
	            result2[0] =  $("#drop_list3").find(".teamid").attr("id");
	            result2[1] =  $("#drop_list4").find(".teamid").attr("id");
	            drawsemimatches(result1,result2);
	            var $this = $(this);
	            if ($this.children('div').length < 1 && $this.attr('id') != "leauge_list") {
	            	var updateteamid = $this.attr('id');
	            	matchupdate(updateteamid);
	            }
	        },
	        receive: function(event, ui) {
	            var $this = $(this);
	            if ($this.children('div').length > 1 && $this.attr('id') != "leauge_list") {
	                // console.log('Only one per list!');
	                $(ui.sender).sortable('cancel');
	            }
	        }
	    });
    	

        var simulatedWinner = '';
        var shareBucket = "teams/";        
        var imgBucket = "images/icons_bg/";
        var imgBucketplain = "images/icons_plain/";
        var winnersBucket = "teams/";
        var jsonBucket = "data/";


        function drawsemimatches(idsInOrder1,idsInOrder2) {
         
            var qualifier1 = $('.qualifier1');
            var eliminator = $('.eliminator');

            $.each(idsInOrder1, function(k, vale) {
            	if(k==0){
                	qualifier1.find(".qualifier1-a1 .team-item").remove();
                }	
                else if(k==1){
                	qualifier1.find(".qualifier1-a2 .team-item").remove();
                }
		        $.each(groupsArray, function(index, team) {

		            if(vale == team.teamid) {		                
		                var li = "<div class='team-img team-item' id='"+team.teamid+"'><img src='"+imgBucket+""+team.displayName.toLowerCase()+".png' alt=''><div class='selected-item gr_bg "+team.displayName.toLowerCase()+"'></div></div>";
		                if(k==0){
		                	qualifier1.find(".qualifier1-a1").append ( li );
		                }
		                else if(k==1){
		                	qualifier1.find(".qualifier1-a2").append ( li );		                	
		                }
		            } 

		        });   		        
            });
            $.each(idsInOrder2, function(l, vale) {
            	if(l==0){
                	eliminator.find(".eliminator-a1 .team-item").remove();
                }
                else if(l==1){
                	eliminator.find(".eliminator-a2 .team-item").remove();
                }

		        $.each(groupsArray, function(index, team) {
		            if(vale == team.teamid) {
		                var li = "<div class='team-img team-item' id='"+team.teamid+"'><img src='"+imgBucket+""+team.displayName.toLowerCase()+".png' alt=''><div class='selected-item gr_bg "+team.displayName.toLowerCase()+"'></div></div>";
		                if(l==0){
		                	eliminator.find(".eliminator-a1").append ( li );
		                }
		                else if(l==1){
		                	eliminator.find(".eliminator-a2").append ( li );		                	
		                }
		            } 
		        });   		        
            }); 
        };
        
        $("#sortable").disableSelection();

        function populateParticle ( data ) {  
            var i = 1;
            $.each(data, function(index, team) {
                
                var groupParent = $('.league');  
                var li = "<div class='col-xs-2 col-sm-2 text-center teamid' id='"+team.teamid+"'><div class='notice drag-div'>";
                li += "<div class='team-img'><img src='"+imgBucket+""+team.displayName.toLowerCase()+".png' alt=''></div>";
                li += "<div class='text-left team-name bg "+team.displayName.toLowerCase()+"'>"+ team.displayName+"</div>";
                li += "</div></div>";
                groupParent.append ( li );
                i++;
            });
        }

        $(document).on("click",".team-item",function() {

	        var parent = $(this).parent();
	        var finalitem = $(this).attr('id');
	        var qualifier1item = $(this).attr('id');
	        var qualifier2item;
	        var final2;
	        var twinnerid;

	        if(parent.parent().find('.team-item').length > 1){
	        	parent.addClass('selected');
	        	console.log("test"+parent.parent().find('.team-item').length);	        	
	        	$(".winner-item").remove();
		        if(parent.hasClass('qualifier1-a1')){
		        	$(".qualifier1-a1").removeClass('deselect');
		        	$(".qualifier1-a2").addClass('deselect').removeClass('selected');
		        	$(".qualifier2 .team-items").removeClass('deselect');
		        	qualifier2item = $(".qualifier1-a2").find(".team-item").attr("id");
		        	drawfinal(finalitem);     
		        	qualifier2(qualifier2item);
		        }
		        else if(parent.hasClass('qualifier1-a2')){
		        	$(".qualifier1-a2").removeClass('deselect');
		        	$(".qualifier1-a1").addClass('deselect').removeClass('selected');
		        	$(".qualifier2 .team-items").removeClass('deselect');
		        	qualifier2item = $(".qualifier1-a1").find(".team-item").attr("id");
		        	drawfinal(finalitem);
		        	qualifier2(qualifier2item);

		        }
		        else if(parent.hasClass('eliminator-a1')){
		        	$(".eliminator-a1").removeClass('deselect');
		        	$(".eliminator-a2").addClass('deselect').removeClass('selected');
		        	$(".qualifier2 .team-items").removeClass('deselect');
		        	qualifier1(qualifier1item);
		        }
		        else if(parent.hasClass('eliminator-a2')){
		        	$(".eliminator-a2").removeClass('deselect');
		        	$(".eliminator-a1").addClass('deselect').removeClass('selected');
		        	$(".qualifier2 .team-items").removeClass('deselect');
		        	qualifier1(qualifier1item);
		        }

		        else if(parent.hasClass('qualifier2-a1')){
		        	$(".qualifier2-a1").removeClass('deselect');
		        	$(".qualifier2-a2").addClass('deselect').removeClass('selected');;
		        	final2 = $(".qualifier2-a1").find(".team-item").attr("id");
		        	drawfinal2(final2);
		        }
		        else if(parent.hasClass('qualifier2-a2')){
		        	$(".qualifier2-a2").removeClass('deselect');
		        	$(".qualifier2-a1").addClass('deselect').removeClass('selected');;
		        	final2 = $(".qualifier2-a2").find(".team-item").attr("id");
		        	drawfinal2(final2);
		        }
		        else if(parent.hasClass('finals-a1')){
		        	twinnerid = $(".finals-a1").find(".team-item").attr("id");
		        	twinner(twinnerid);
		        	$(".finals-a2").removeClass('selected');
		        }
		        else if(parent.hasClass('finals-a2')){
		        	twinnerid = $(".finals-a2").find(".team-item").attr("id");
		        	$(".finals-a1").removeClass('selected');
		        	twinner(twinnerid);
		        }
	        }

	    });

	    function twinner(twinnerid){
	    	$.each(groupsArray, function(index, team) {

	            if(twinnerid == team.teamid) {
	            	console.log("Winner="+team.displayName);
	            	$(".winner-items .winner-item").remove();
	            	var li = "<div class='winner-item gr_bg "+team.displayName.toLowerCase()+"'>";
	            	li += "<img src='"+imgBucketplain+""+team.displayName.toLowerCase()+".png' alt=''>";
			    	li += "<div class='team-img team-item gr_bg "+team.displayName.toLowerCase()+"' id='"+team.teamid+"'>";
			    	li += team.fullName+"</div>";
			    	li += "</div>";
			    	$(".winner-items").append ( li );	
	            }
		    });
	    };

	    function drawfinal(finalitem){
	    	$.each(groupsArray, function(index, team) {

	            if(finalitem == team.teamid) {
	            	$(".qualifier2-a2").removeClass("deselect");
			    	$(".finals-a1 .team-item").remove();
			    	$(".finals-a2 .team-item").remove().parent().removeClass("deselect");
			    	var li = "<div class='team-img team-item' id='"+team.teamid+"'><img src='"+imgBucket+""+team.displayName.toLowerCase()+".png' alt=''><div class='selected-item gr_bg "+team.displayName.toLowerCase()+"'></div></div>";
			    	$(".finals-a1").append ( li );	
	            }
		    });
	    };
	    function drawfinal2(finalitem){
	    	$.each(groupsArray, function(index, team) {	    		
	            if(finalitem == team.teamid) {
	            	
			    	$(".finals-a2 .team-item").remove();
			    	var li = "<div class='team-img team-item' id='"+team.teamid+"'><img src='"+imgBucket+""+team.displayName.toLowerCase()+".png' alt=''><div class='selected-item gr_bg "+team.displayName.toLowerCase()+"'></div></div>";
			    	$(".finals-a2").append ( li );	
	            }
		    });
	    };
	    function qualifier1(qualifier1item){
	    	$.each(groupsArray, function(index, team) {

	            if(qualifier1item == team.teamid) {
	            	$(".qualifier2-a2").removeClass("deselect");
			    	$(".qualifier2-a2 .team-item").remove();
			    	$(".finals-a2 .team-item").remove();
			    	var li = "<div class='team-img team-item' id='"+team.teamid+"'><img src='"+imgBucket+""+team.displayName.toLowerCase()+".png' alt=''><div class='selected-item gr_bg "+team.displayName.toLowerCase()+"'></div></div>";
			    	$(".qualifier2-a2").append ( li );	
	            }
		    });
	    };
	    function qualifier2(qualifier2item){
	    	$.each(groupsArray, function(index, team) {

	            if(qualifier2item == team.teamid) {
			    	$(".qualifier2-a1 .team-item").remove();
			    	var li = "<div class='team-img team-item' id='"+team.teamid+"'><img src='"+imgBucket+""+team.displayName.toLowerCase()+".png' alt=''><div class='selected-item gr_bg "+team.displayName.toLowerCase()+"'></div></div>";
			    	$(".qualifier2-a1").append ( li );	
	            }
		    });
	    };

	    function matchupdate(updateteamid){
	    	updateteamid = updateteamid[updateteamid.length -1];
	    	$(".winner-item").remove();
	    	if(updateteamid==1 || updateteamid==2){
	    		$(".qualifier2 .team-items, .qualifier1 .team-items, .finals .team-items").removeClass('deselect selected');
	    		$(".finals-a1 .team-item, .finals-a2 .team-item").remove();
	    		$(".qualifier2-a1 .team-item").remove();
	    	}
	    	if(updateteamid==3 || updateteamid==4){
		    	$(".qualifier2 .team-items, .eliminator .team-items, .finals .team-items").removeClass('deselect selected');
		    	$(".qualifier2-a2 .team-item").remove();
		    	$(".finals-a2 .team-item").remove();	
	    	}

	    };

    });
    </script> 
</body>
</html>
