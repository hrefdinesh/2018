<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>jQuery UI Sortable - Default functionality</title>
    <link rel="stylesheet" href="css/jquery-ui.min.css">
    <style>
    .swiper {
        list-style-type: none;
        margin: 0;
        padding: 0;
        width: 100%;
        max-width: 350px;
    }

    .swiper li {
        margin: 0 3px 3px 3px;
        padding: 0.4em 0.4em;
        font-size: 1.4em;
    }

    .swiper li span {
        position: absolute;
        margin-left: -1.3em;
    }
    </style>
</head>

<body>

    <ul class="swiper"></ul>
    <br>
    <button class="button">Get</button>




    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script>
    $(function() {
        //  Team Sortable 
        $(".swiper").sortable({
            start: function(e, ui) {
                // creates a temporary attribute on the element with the old index
                $(this).attr('data-previndex', ui.item.index());
            },
            update: function(e, ui) {
                // gets the new and old index then removes the temporary attribute
                var newIndex = ui.item.index();
                var oldIndex = $(this).attr('data-previndex');
                var element_id = ui.item.attr('id');
                // alert('id of Item moved = ' + element_id + ' old position = ' + oldIndex + ' new position = ' + newIndex);
                $(this).removeAttr('data-previndex');
                $(this).attr('data-position', newIndex);

                console.log("test");
            }
        });
        
        $("#sortable").disableSelection();

        // Get Data
        $(".button").click(function(){
            var idsInOrder = $(".swiper").sortable("toArray");
            console.log(idsInOrder);
        });


        $.get ( "data/data.json", function ( data ) {
            var groupsArray = data.Teams.slice ();
            populateParticle ( groupsArray );                
        });


        function chunks ( array, size ) {
            var results = [];
            var origArray = array.slice ();
            while ( origArray.length ) {
                results.push ( origArray.splice ( 0, 1 ) );
            }
            return results;
        }

        function populateParticle ( data ) {        
            var i = 1;
            $.each(data, function(index, team) {
                var groupParent = $('.swiper');  
                var li = $ ( "<li class='ui-state-default' id='team-id-"+i+"'>"+ i +" - " + team.displayName + "</li>");
                groupParent.append ( li );
                i++;
            });
        }

    });
    </script>

</body>
</html>